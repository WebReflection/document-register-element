/*! (C) WebReflection Mit Style License */
define(function(){function Z(e,t){for(var n=0,r=e.length;n<r;n++)lt(e[n],t)}function et(e){for(var t=0,n=e.length,r;t<n;t++)r=e[t],Y(r,v[nt(r)])}function tt(e){return function(t){D(t)&&(lt(t,e),Z(t.querySelectorAll(m),e))}}function nt(e){var t=e.getAttribute("is"),n=e.nodeName.toUpperCase(),r=y.call(d,t?c+t.toUpperCase():l+n);return t&&-1<r&&!rt(n,t)?-1:r}function rt(e,t){return-1<m.indexOf(e+'[is="'+t+'"]')}function it(e){var t=e.currentTarget,n=e.attrChange,r=e.prevValue,s=e.newValue;V&&t.attributeChangedCallback&&e.attrName!=="style"&&t.attributeChangedCallback(e.attrName,n===e[i]?null:r,n===e[o]?null:s)}function st(e){var t=tt(e);return function(e){R.push(t,e.target)}}function ot(e){X&&(X=!1,e.currentTarget.removeEventListener(a,ot)),Z((e.target||document).querySelectorAll(m),e.detail===n?n:t),_&&ft()}function ut(e,t){var n=this;B.call(n,e,t),$.call(n,{target:n})}function at(t,n){A(t,n),Q?Q.observe(t,I):(W&&(t.setAttribute=ut,t[e]=K(t),t.addEventListener(f,$)),t.addEventListener(u,it)),t.createdCallback&&V&&(t.created=!0,t.createdCallback(),t.created=!1)}function ft(){for(var e,t=0,r=P.length;t<r;t++)e=P[t],g.contains(e)||(P.splice(t,1),lt(e,n))}function lt(e,r){var i,s=nt(e);-1<s&&(G(e,v[s]),s=0,r===t&&!e[t]?(e[n]=!1,e[t]=!0,s=1,_&&y.call(P,e)<0&&P.push(e)):r===n&&!e[n]&&(e[t]=!1,e[n]=!0,s=1),s&&(i=e[r+"Callback"])&&i.call(e))}var e="__"+REGISTER_ELEMENT+(Math.random()*1e5>>0),t="attached",n="detached",r="extends",i="ADDITION",s="MODIFICATION",o="REMOVAL",u="DOMAttrModified",a="DOMContentLoaded",f="DOMSubtreeModified",l="<",c="=",h=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,p=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],d=[],v=[],m="",g=document.documentElement,y=d.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},b=Object.prototype,w=b.hasOwnProperty,E=b.isPrototypeOf,S=Object.defineProperty,x=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,N=Object.getPrototypeOf,C=Object.setPrototypeOf,k=!!Object.__proto__,L=Object.create||function ct(e){return e?(ct.prototype=e,new ct):this},A=C||(k?function(e,t){return e.__proto__=t,e}:T&&x?function(){function e(e,t){for(var n,r=T(t),i=0,s=r.length;i<s;i++)n=r[i],w.call(e,n)||S(e,n,x(t,n))}return function(t,n){do e(t,n);while((n=N(n))&&!E.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),O=window.MutationObserver||window.WebKitMutationObserver,M=(window.HTMLElement||window.Element||window.Node).prototype,_=!E.call(M,g),D=_?function(e){return e.nodeType===1}:function(e){return E.call(M,e)},P=_&&[],H=M.cloneNode,B=M.setAttribute,j=M.removeAttribute,F=document.createElement,I=O&&{attributes:!0,characterData:!0,attributeOldValue:!0},q=O||function(e){W=!1,g.removeEventListener(u,q)},R,U=window.setImmediate||function(e){var t=new Image;t.onerror=e,t.src=""},z=!1,W=!0,X=!0,V=!0,$,J,K,Q,G,Y;C||k?(G=function(e,t){E.call(t,e)||at(e,t)},Y=at):(G=function(t,n){t[e]||(t[e]=Object(!0),at(t,n))},Y=G),_?(W=!1,function(){var t=x(M,"addEventListener"),n=t.value,r=function(e){var t=new CustomEvent(u,{bubbles:!0});t.attrName=e,t.prevValue=this.getAttribute(e),t.newValue=null,t[o]=t.attrChange=2,j.call(this,e),this.dispatchEvent(t)},a=function(e,t){var n=this.hasAttribute(e),r=n&&this.getAttribute(e),o=new CustomEvent(u,{bubbles:!0});B.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o[s]=o.attrChange=1:o[i]=o.attrChange=0,this.dispatchEvent(o)},f=function(t){var n=t.currentTarget,r=n[e],o=t.propertyName,a;r.hasOwnProperty(o)&&(r=r[o],a=new CustomEvent(u,{bubbles:!0}),a.attrName=r.name,a.prevValue=r.value||null,a.newValue=r.value=n[o]||null,a.prevValue==null?a[i]=a.attrChange=0:a[s]=a.attrChange=1,n.dispatchEvent(a))};t.value=function(t,i,s){t===u&&this.attributeChangedCallback&&this.setAttribute!==a&&(this[e]={className:{name:"class",value:this.className}},this.setAttribute=a,this.removeAttribute=r,n.call(this,"propertychange",f)),n.call(this,t,i,s)},S(M,"addEventListener",t)}()):O||(g.addEventListener(u,q),g.setAttribute(e,1),g.removeAttribute(e),W&&($=function(t){var n=this,r,u,a;if(n===t.target){r=n[e],n[e]=u=K(n);for(a in u){if(!(a in r))return J(0,n,a,r[a],u[a],i);if(u[a]!==r[a])return J(1,n,a,r[a],u[a],s)}for(a in r)if(!(a in u))return J(2,n,a,r[a],u[a],o)}},J=function(e,t,n,r,i,s){var o={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:i};o[s]=e,it(o)},K=function(e){for(var t,n,r={},i=e.attributes,s=0,o=i.length;s<o;s++)t=i[s],n=t.name,n!=="setAttribute"&&(r[n]=t.value);return r})),document[REGISTER_ELEMENT]=function(i,s){S=i.toUpperCase(),z||(z=!0,O?(Q=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new O(function(r){for(var i,s,o=0,u=r.length;o<u;o++)i=r[o],i.type==="childList"?(n(i.addedNodes,e),n(i.removedNodes,t)):(s=i.target,V&&s.attributeChangedCallback&&i.attributeName!=="style"&&s.attributeChangedCallback(i.attributeName,i.oldValue,s.getAttribute(i.attributeName)))})}(tt(t),tt(n)),Q.observe(document,{childList:!0,subtree:!0})):(R=[],U(function x(){while(R.length)R.shift().call(null,R.shift());U(x)}),document.addEventListener("DOMNodeInserted",st(t)),document.addEventListener("DOMNodeRemoved",st(n))),document.addEventListener(a,ot),document.addEventListener("readystatechange",ot),document.createElement=function(e,t){var n=F.apply(document,arguments),r=""+e,i=y.call(d,(t?c:l)+(t||r).toUpperCase()),s=-1<i;return t&&(n.setAttribute("is",t=t.toLowerCase()),s&&(s=rt(r.toUpperCase(),t))),V=!document.createElement.innerHTMLHelper,s&&Y(n,v[i]),n},M.cloneNode=function(e){var t=H.call(this,!!e),n=nt(t);return-1<n&&Y(t,v[n]),e&&et(t.querySelectorAll(m)),t});if(-2<y.call(d,c+S)+y.call(d,l+S))throw new Error("A "+i+" type is already registered");if(!h.test(S)||-1<y.call(p,S))throw new Error("The type "+i+" is invalid");var o=function(){return f?document.createElement(g,S):document.createElement(g)},u=s||b,f=w.call(u,r),g=f?s[r].toUpperCase():S,E=d.push((f?c:l)+S)-1,S;return m=m.concat(m.length?",":"",f?g+'[is="'+i.toLowerCase()+'"]':g),o.prototype=v[E]=w.call(u,"prototype")?u.prototype:L(M),Z(document.querySelectorAll(m),t),o}});