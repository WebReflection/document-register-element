/*! (C) WebReflection Mit Style License */
define(function(){"use strict";function et(e,t){for(var n=0,r=e.length;n<r;n++)ct(e[n],t)}function tt(e){for(var t=0,n=e.length,r;t<n;t++)r=e[t],Z(r,m[rt(r)])}function nt(e){return function(t){P(t)&&(ct(t,e),et(t.querySelectorAll(g),e))}}function rt(e){var t=e.getAttribute("is"),n=e.nodeName.toUpperCase(),r=b.call(v,t?h+t.toUpperCase():c+n);return t&&-1<r&&!it(n,t)?-1:r}function it(e,t){return-1<g.indexOf(e+'[is="'+t+'"]')}function st(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,i=e.target;$&&(!i||i===t)&&t.attributeChangedCallback&&r!=="style"&&t.attributeChangedCallback(r,n===e[s]?null:e.prevValue,n===e[u]?null:e.newValue)}function ot(e){var t=nt(e);return function(e){U.push(t,e.target)}}function ut(e){V&&(V=!1,e.currentTarget.removeEventListener(f,ut)),et((e.target||document).querySelectorAll(g),e.detail===r?r:n),D&&lt()}function at(e,t){var n=this;j.call(n,e,t),J.call(n,{target:n})}function ft(e,n){O(e,n),G?G.observe(e,q):(X&&(e.setAttribute=at,e[t]=Q(e),e.addEventListener(l,J)),e.addEventListener(a,st)),e.createdCallback&&$&&(e.created=!0,e.createdCallback(),e.created=!1)}function lt(){for(var e,t=0,n=H.length;t<n;t++)e=H[t],y.contains(e)||(H.splice(t,1),ct(e,r))}function ct(e,t){var i,s=rt(e);-1<s&&(Y(e,m[s]),s=0,t===n&&!e[n]?(e[r]=!1,e[n]=!0,s=1,D&&b.call(H,e)<0&&H.push(e)):t===r&&!e[r]&&(e[n]=!1,e[r]=!0,s=1),s&&(i=e[t+"Callback"])&&i.call(e))}var e="registerElement";if(e in document)return;var t="__"+e+(Math.random()*1e5>>0),n="attached",r="detached",i="extends",s="ADDITION",o="MODIFICATION",u="REMOVAL",a="DOMAttrModified",f="DOMContentLoaded",l="DOMSubtreeModified",c="<",h="=",p=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,d=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],v=[],m=[],g="",y=document.documentElement,b=v.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},w=Object.prototype,E=w.hasOwnProperty,S=w.isPrototypeOf,x=Object.defineProperty,T=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,C=Object.getPrototypeOf,k=Object.setPrototypeOf,L=!!Object.__proto__,A=Object.create||function ht(e){return e?(ht.prototype=e,new ht):this},O=k||(L?function(e,t){return e.__proto__=t,e}:N&&T?function(){function e(e,t){for(var n,r=N(t),i=0,s=r.length;i<s;i++)n=r[i],E.call(e,n)||x(e,n,T(t,n))}return function(t,n){do e(t,n);while((n=C(n))&&!S.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),M=window.MutationObserver||window.WebKitMutationObserver,_=(window.HTMLElement||window.Element||window.Node).prototype,D=!S.call(_,y),P=D?function(e){return e.nodeType===1}:function(e){return S.call(_,e)},H=D&&[],B=_.cloneNode,j=_.setAttribute,F=_.removeAttribute,I=document.createElement,q=M&&{attributes:!0,characterData:!0,attributeOldValue:!0},R=M||function(e){X=!1,y.removeEventListener(a,R)},U,z=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,10)},W=!1,X=!0,V=!0,$=!0,J,K,Q,G,Y,Z;k||L?(Y=function(e,t){S.call(t,e)||ft(e,t)},Z=ft):(Y=function(e,n){e[t]||(e[t]=Object(!0),ft(e,n))},Z=Y),D?(X=!1,function(){var e=T(_,"addEventListener"),n=e.value,r=function(e){var t=new CustomEvent(a,{bubbles:!0});t.attrName=e,t.prevValue=this.getAttribute(e),t.newValue=null,t[u]=t.attrChange=2,F.call(this,e),this.dispatchEvent(t)},i=function(e,t){var n=this.hasAttribute(e),r=n&&this.getAttribute(e),i=new CustomEvent(a,{bubbles:!0});j.call(this,e,t),i.attrName=e,i.prevValue=n?r:null,i.newValue=t,n?i[o]=i.attrChange=1:i[s]=i.attrChange=0,this.dispatchEvent(i)},f=function(e){var n=e.currentTarget,r=n[t],i=e.propertyName,u;r.hasOwnProperty(i)&&(r=r[i],u=new CustomEvent(a,{bubbles:!0}),u.attrName=r.name,u.prevValue=r.value||null,u.newValue=r.value=n[i]||null,u.prevValue==null?u[s]=u.attrChange=0:u[o]=u.attrChange=1,n.dispatchEvent(u))};e.value=function(e,s,o){e===a&&this.attributeChangedCallback&&this.setAttribute!==i&&(this[t]={className:{name:"class",value:this.className}},this.setAttribute=i,this.removeAttribute=r,n.call(this,"propertychange",f)),n.call(this,e,s,o)},x(_,"addEventListener",e)}()):M||(y.addEventListener(a,R),y.setAttribute(t,1),y.removeAttribute(t),X&&(J=function(e){var n=this,r,i,a;if(n===e.target){r=n[t],n[t]=i=Q(n);for(a in i){if(!(a in r))return K(0,n,a,r[a],i[a],s);if(i[a]!==r[a])return K(1,n,a,r[a],i[a],o)}for(a in r)if(!(a in i))return K(2,n,a,r[a],i[a],u)}},K=function(e,t,n,r,i,s){var o={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:i};o[s]=e,st(o)},Q=function(e){for(var t,n,r={},i=e.attributes,s=0,o=i.length;s<o;s++)t=i[s],n=t.name,n!=="setAttribute"&&(r[n]=t.value);return r})),document[e]=function(t,s){S=t.toUpperCase(),W||(W=!0,M?(G=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new M(function(r){for(var i,s,o=0,u=r.length;o<u;o++)i=r[o],i.type==="childList"?(n(i.addedNodes,e),n(i.removedNodes,t)):(s=i.target,$&&s.attributeChangedCallback&&i.attributeName!=="style"&&s.attributeChangedCallback(i.attributeName,i.oldValue,s.getAttribute(i.attributeName)))})}(nt(n),nt(r)),G.observe(document,{childList:!0,subtree:!0})):(U=[],z(function x(){while(U.length)U.shift().call(null,U.shift());z(x)}),document.addEventListener("DOMNodeInserted",ot(n)),document.addEventListener("DOMNodeRemoved",ot(r))),document.addEventListener(f,ut),document.addEventListener("readystatechange",ut),document.createElement=function(e,t){var n=I.apply(document,arguments),r=""+e,i=b.call(v,(t?h:c)+(t||r).toUpperCase()),s=-1<i;return t&&(n.setAttribute("is",t=t.toLowerCase()),s&&(s=it(r.toUpperCase(),t))),$=!document.createElement.innerHTMLHelper,s&&Z(n,m[i]),n},_.cloneNode=function(e){var t=B.call(this,!!e),n=rt(t);return-1<n&&Z(t,m[n]),e&&tt(t.querySelectorAll(g)),t});if(-2<b.call(v,h+S)+b.call(v,c+S))throw new Error("A "+t+" type is already registered");if(!p.test(S)||-1<b.call(d,S))throw new Error("The type "+t+" is invalid");var o=function(){return a?document.createElement(l,S):document.createElement(l)},u=s||w,a=E.call(u,i),l=a?s[i].toUpperCase():S,y=v.push((a?h:c)+S)-1,S;return g=g.concat(g.length?",":"",a?l+'[is="'+t.toLowerCase()+'"]':l),o.prototype=m[y]=E.call(u,"prototype")?u.prototype:A(_),et(document.querySelectorAll(g),n),o}});